const quizData = [
    // 3/17 Questions
    {
        question: "1. What is the process where individuals come to internalize their culture?",
        options: [
            "A) Assimilation",
            "B) Socialization",
            "C) Acculturation",
            "D) Normalization"
        ],
        answer: 1
    },
    {
        question: "2. Does family failure to provide for a child's needs affect behavior?",
        options: [
            "A) No, behavior is genetic",
            "B) Only in extreme cases",
            "C) YES",
            "D) Only for adolescents"
        ],
        answer: 2
    },
    {
        question: "3. Can mass media influence adolescent behavior?",
        options: [
            "A) No impact",
            "B) Only violent media",
            "C) YES",
            "D) Only under age 12"
        ],
        answer: 2
    },
    {
        question: "4. What is it called when a parent fails to provide adequate care?",
        options: [
            "A) Abuse",
            "B) Neglect",
            "C) Maltreatment",
            "D) Desertion"
        ],
        answer: 1
    },
    {
        question: "5. What is the term for mistreatment of children by caregivers?",
        options: [
            "A) Juvenile delinquency",
            "B) Child Abuse",
            "C) Parental failure",
            "D) Domestic violence"
        ],
        answer: 1
    },
    {
        question: "6. The umbrella term for child abuse and neglect is:",
        options: [
            "A) Family dysfunction",
            "B) Child maltreatment",
            "C) Domestic violence",
            "D) Juvenile neglect"
        ],
        answer: 1
    },
    {
        question: "7. Which is NOT a family-related risk factor for delinquency?",
        options: [
            "A) Divorce",
            "B) Substance abuse",
            "C) Poverty",
            "D) Home schooling"
        ],
        answer: 3
    },
    {
        question: "8. Can early intervention programs help reduce neglect?",
        options: [
            "A) No",
            "B) Only in severe cases",
            "C) Yes",
            "D) Only for teens"
        ],
        answer: 2
    },

    // 3/28 Gang Questions
    {
        question: "9. A group of youths engaged in illegal activities is called a:",
        options: [
            "A) Club",
            "B) Gang",
            "C) Syndicate",
            "D) Crew"
        ],
        answer: 1
    },
    {
        question: "10. Which is NOT a common reason youth join gangs?",
        options: [
            "A) Community",
            "B) Money",
            "C) Family",
            "D) Better grades"
        ],
        answer: 3
    },
    {
        question: "11. Which theory explains gang participation through blocked opportunities?",
        options: [
            "A) Social disorganization",
            "B) Strain theory",
            "C) Subcultural theory",
            "D) Labeling theory"
        ],
        answer: 1
    },
    {
        question: "12. Which theory links gangs to urban slum conditions?",
        options: [
            "A) Social disorganization",
            "B) Strain theory",
            "C) Subcultural theory",
            "D) Differential association"
        ],
        answer: 0
    },
    {
        question: "13. Which theory focuses on distinct lower-class gang culture?",
        options: [
            "A) Social disorganization",
            "B) Strain theory",
            "C) Subcultural affiliation",
            "D) Control theory"
        ],
        answer: 2
    },

    // True/False Questions
    {
        question: "14. Substance abuse among adolescents has increased since the 1970s but decreased among high-risk users.",
        options: [
            "A) True",
            "B) False (Both increased)"
        ],
        answer: 1
    },
    {
        question: "15. Juvenile violent crime rates peaked in mid-2000s then declined through 2012.",
        options: [
            "A) True",
            "B) False"
        ],
        answer: 0
    },
    {
        question: "16. At least 15% of justice-involved youth have substance/psychiatric disorders.",
        options: [
            "A) True",
            "B) False (It's much higher)"
        ],
        answer: 1
    },

    // 4/14 Questions
    {
        question: "17. Which is NOT a correctional model?",
        options: [
            "A) Rehabilitation",
            "B) Crime control",
            "C) Restorative justice",
            "D) Parental justice"
        ],
        answer: 3
    },
    {
        question: "18. Which is a community-based program?",
        options: [
            "A) Drug courts",
            "B) Training schools",
            "C) Juvenile prisons",
            "D) Detention centers"
        ],
        answer: 0
    },
    {
        question: "19. The three main juvenile justice subsystems are:",
        options: [
            "A) Police, courts, corrections",
            "B) Schools, families, communities",
            "C) Prevention, intervention, rehabilitation",
            "D) Federal, state, local"
        ],
        answer: 0
    },
    {
        question: "20. The two main juvenile court hearings are:",
        options: [
            "A) Arraignment and trial",
            "B) Dispositional and adjudicatory",
            "C) Sentencing and appeals",
            "D) Preliminary and evidentiary"
        ],
        answer: 1
    },

    // 4/30 Questions
    {
        question: "21. 'Adjudicated' in juvenile court means:",
        options: [
            "A) Found delinquent",
            "B) Sent to prison",
            "C) Given probation",
            "D) Case dismissed"
        ],
        answer: 0
    },
    {
        question: "22. Mass media impacts juveniles because it:",
        options: [
            "A) Is entertaining",
            "B) Shapes perceptions/norms",
            "C) Is always available",
            "D) Is government controlled"
        ],
        answer: 1
    },
    {
        question: "23. We study gender differences in delinquency to:",
        options: [
            "A) Stereotype offenders",
            "B) Research/respond effectively",
            "C) Separate genders",
            "D) Justify discrimination"
        ],
        answer: 1
    },
    {
        question: "24. Which is NOT a juvenile placement option?",
        options: [
            "A) Boot camps",
            "B) Group homes",
            "C) Adult prisons",
            "D) Ranches"
        ],
        answer: 2
    },
    {
        question: "25. Court-ordered community supervision is called:",
        options: [
            "A) Parole",
            "B) Probation",
            "C) Diversion",
            "D) Mediation"
        ],
        answer: 1
    },
    {
        question: "26. The first juvenile court stage is:",
        options: [
            "A) Intake process",
            "B) Adjudication",
            "C) Disposition",
            "D) Sentencing"
        ],
        answer: 0
    },
    {
        question: "27. Pretrial identification practices include:",
        options: [
            "A) Booking procedures",
            "B) Lineups and showups",
            "C) Psychological testing",
            "D) Background checks"
        ],
        answer: 1
    },
    {
        question: "28. Police discretion refers to:",
        options: [
            "A) Mandatory arrests",
            "B) Officer decision-making",
            "C) Court orders",
            "D) Probation rules"
        ],
        answer: 1
    },
    {
        question: "29. Long-term juvenile facilities are called:",
        options: [
            "A) Training schools",
            "B) County jails",
            "C) Federal prisons",
            "D) Police lockups"
        ],
        answer: 0
    }
];

const matchingData = {
    terms: [
        "Child Abuse Types",
        "Gang Theories",
        "Placement Options",
        "Court Hearings",
        "Justice Subsystems"
    ],
    descriptions: [
        "A) Physical, emotional, sexual",
        "B) Strain, social disorganization, subcultural",
        "C) Group homes, ranches, boot camps",
        "D) Adjudicatory, dispositional",
        "E) Police, courts, corrections"
    ],
    correctMatches: [0, 1, 2, 3, 4]
};

// Quiz functionality (identical to your original template)
let currentQuiz = 0;
let score = 0;

function startQuiz() {
    document.getElementById("results").style.display = "none";
    document.getElementById("actions").style.display = "none";
    document.getElementById("quiz-container").innerHTML = "";
    document.getElementById("matching-container").innerHTML = "";
    currentQuiz = 0;
    score = 0;
    loadQuestion();
}

function loadQuestion() {
    const quizContainer = document.getElementById("quiz-container");
    if (currentQuiz >= quizData.length) {
        renderMatchingSection();
        return;
    }

    const questionObj = quizData[currentQuiz];
    const questionEl = document.createElement("div");
    questionEl.classList.add("question");
    questionEl.innerHTML = `
        <h2>${questionObj.question}</h2>
        <div class="options">
            ${questionObj.options.map((opt, i) => `
                <button class="option-btn" onclick="submitAnswer(${i})">${opt}</button>
            `).join("")}
        </div>
    `;

    quizContainer.innerHTML = "";
    quizContainer.appendChild(questionEl);
}

function submitAnswer(selectedIndex) {
    if (selectedIndex === quizData[currentQuiz].answer) {
        score++;
    }
    currentQuiz++;
    loadQuestion();
}

function renderMatchingSection() {
    const container = document.getElementById("matching-container");
    container.innerHTML = `
        <h2>Matching Section</h2>
        <p>Match each juvenile justice concept with its correct description:</p>
    `;
    
    const termList = matchingData.terms;
    const descriptionList = matchingData.descriptions;

    termList.forEach((term, i) => {
        const row = document.createElement("div");
        row.classList.add("match-item");

        row.innerHTML = `
            <div class="term">${term}</div>
            <select class="match-select" data-index="${i}">
                <option value="">-- Select Match --</option>
                ${descriptionList.map((desc, idx) => `<option value="${idx}">${desc}</option>`).join("")}
            </select>
        `;
        container.appendChild(row);
    });

    const submitBtn = document.createElement("button");
    submitBtn.className = "submit-btn";
    submitBtn.textContent = "Submit Matching Answers";
    submitBtn.onclick = submitMatchingAnswers;
    container.appendChild(submitBtn);
}

function submitMatchingAnswers() {
    const selects = document.querySelectorAll("#matching-container select");
    let matchScore = 0;

    selects.forEach(select => {
        const termIndex = parseInt(select.dataset.index);
        const selectedValue = parseInt(select.value);
        if (selectedValue === matchingData.correctMatches[termIndex]) {
            matchScore++;
            select.style.borderColor = "#2ecc71";
        } else {
            select.style.borderColor = "#e74c3c";
        }
    });

    score += matchScore;
    showResults();
}

function showResults() {
    const total = quizData.length + matchingData.terms.length;
    const percentage = Math.round((score / total) * 100);
    const results = document.getElementById("results");

    results.innerHTML = `
        <h3>Quiz Results</h3>
        <div class="score">
            You scored <strong>${score} out of ${total}</strong> (${percentage}%)
        </div>
        <div class="feedback">
            ${getFeedback(percentage)}
        </div>
    `;
    results.style.display = "block";
    document.getElementById("actions").style.display = "flex";
}

function getFeedback(percentage) {
    if (percentage >= 90) return "Excellent! You're a juvenile justice expert!";
    if (percentage >= 70) return "Great job! You have strong knowledge of juvenile justice.";
    if (percentage >= 50) return "Good effort! Review your notes and try again.";
    return "Keep studying! Focus on key terms and theories.";
}

function returnToHome() {
    window.location.href = "index.html";
}

function takeAgain() {
    startQuiz();
}

document.addEventListener('DOMContentLoaded', startQuiz);